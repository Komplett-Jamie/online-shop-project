<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./../styling/mainPage.css">
    <link rel="stylesheet" href="./../styling/cart.css">
    <title>Document</title>
</head>
<body onload="onLoadCart()">
<div class="main-page-container">
    <header>
        <div id="header-container">
            <div id="header-wrapper">
                <div id="logo">
                    <a href="./mainPage.html">
                        <img src="https://logos.textgiraffe.com/logos/logo-name/Jamie-designstyle-kiddo-m.png" style="width: 50%;" alt="logo-b2c-svg" href="#">
                    </a>
                </div>
                <div id="searchBar">
                    <input id="search_input" type="text" placeholder="Search for products...">
                </div>
                <div id="user_controls">
                    <div id="icon-container">
                        <div onclick="dropdownMenu()" id="user_icon">
                            <svg width="20" height="20" viewBox="0 0 16 16"><path fill="#333" d="M13.477 16h-10.954c-0.14 0-0.274-0.059-0.369-0.163s-0.142-0.242-0.129-0.382c0.11-1.22 0.585-2.363 1.373-3.305 0.697-0.832 1.59-1.452 2.602-1.809l0-0.475c-0.562-0.385-1.037-0.926-1.385-1.582-0.402-0.758-0.615-1.634-0.615-2.535 0-1.251 0.405-2.431 1.139-3.323 0.758-0.92 1.774-1.427 2.861-1.427s2.103 0.507 2.861 1.427c0.735 0.892 1.139 2.072 1.139 3.323 0 0.901-0.213 1.777-0.615 2.535-0.348 0.655-0.823 1.197-1.385 1.582l0 0.475c1.012 0.357 1.905 0.977 2.602 1.809 0.788 0.942 1.263 2.084 1.373 3.305 0.013 0.14-0.034 0.279-0.129 0.382s-0.229 0.163-0.369 0.163zM3.1 15h9.8c-0.164-0.81-0.527-1.565-1.064-2.208-0.649-0.776-1.504-1.33-2.471-1.604-0.215-0.061-0.364-0.257-0.364-0.481l-0-1.116c0-0.179 0.095-0.344 0.25-0.433 1.063-0.613 1.75-1.951 1.75-3.408 0-2.068-1.346-3.75-3-3.75s-3 1.682-3 3.75c0 1.457 0.687 2.795 1.75 3.408 0.155 0.089 0.25 0.254 0.25 0.433l-0 1.116c0 0.224-0.149 0.42-0.364 0.481-0.967 0.274-1.822 0.828-2.471 1.604-0.538 0.642-0.9 1.397-1.064 2.208z"></path></svg>
                            <div class="dropdown-content">
                                <a id="toggle-login-on-off" href="./../Pages/userLogin.html">Login</a>
                                <a href="./../Pages/userRegister.html">Register</a>
                            </div>
                        </div>
                        <span id="user_name_toggle" class="user_name"></span>
                    </div>
                    <div id="icon-container">
                        <a href="./../Pages/cart.html">
                        <div id="small_cart">
                            <svg width="20" height="20" viewBox="0 0 16 16"><path fill="#333" d="M6 14.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5z"></path><path fill="#333" d="M16 14.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5z"></path><path fill="#333" d="M16 8v-6h-12c0-0.552-0.448-1-1-1h-3v1h2l0.751 6.438c-0.458 0.367-0.751 0.93-0.751 1.562 0 1.105 0.895 2 2 2h12v-1h-12c-0.552 0-1-0.448-1-1 0-0.003 0-0.007 0-0.010l13-1.99z"></path></svg>
                        </div>
                        <span>Cart</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div id="lower-header-container">
            <ul id="category_list">
            </ul>
        </div>
    </header>
    <section>
    <div id="cart-items">

    </div>
    </section>
    <section>
<form class="cart-full-summary" onsubmit="onSubmitConfirmButton(event)" id="cartForm">
    <div class="cart-info-container">
        <div class="container-one">
            <div id="cart-freight-options">
            <span>Freight Options</span>
            <br>          
            </div>
            <div id="cart-summary">
            <span>Cart Summary</span>
            <table>
                <tr>
                    <td class="cart-summary-description">Cart total: </td>
                    <td><span class="cart-summary-call" id="cart-total-price"></span> ,-</td>
                </tr>
                <tr>
                    <td class="cart-summary-description">Total items: </td>
                    <td><span class="cart-summary-call" id="cart-total-items"></span></span></td>
                </tr>
                <tr>
                    <td  class="cart-summary-description">Shipping: </td>
                    <td><span class="cart-summary-call" id="cart-shipping"></span>,-</span></td>
                </tr>
                <tr>
                    <td class="cart-summary-description">Total Price: </td>
                    <td><span class="cart-summary-call" id="cart-total" ></span>,-</span></td>
                </tr>
            </table>
            </div>
        </div>
        <div class="card-details">
            Credit Card Details
            <div class="credit-card-details-container">
                <div id="creditCardForm" class="creditcard-form">
                    <label for="cardNumber">Credit Card Number</label>
                        <input 
                        id="cardNumber" 
                        type="tel" 
                        inputmode="numeric" 
                        autocomplete="cc-number" 
                        maxlength="19" 
                        placeholder="xxxx-xxxx-xxxx-xxxx"
                        onkeyup="formatCreditCard()">
                        <br>
                        <span id="cardNumberErrorMessage"></span>
                        <br>
                        <label>Expiration Date</label>
                    <select name='expirationDateMonth' id='expirationDateMonth'>
                        <option value=''>Month</option>
                        <option value='01'>January</option>
                        <option value='02'>February</option>
                        <option value='03'>March</option>
                        <option value='04'>April</option>
                        <option value='05'>May</option>
                        <option value='06'>June</option>
                        <option value='07'>July</option>
                        <option value='08'>August</option>
                        <option value='09'>September</option>
                        <option value='10'>October</option>
                        <option value='11'>November</option>
                        <option value='12'>December</option>
                    </select> 
                    <label for="expirationDateYear">Year</label>
                    <select name='expirationDateYear' id='expirationDateYear'>
                        <option value=''>Year</option>
                        <option value='2020'>2020</option>
                        <option value='2021'>2021</option>
                        <option value='2022'>2022</option>
                        <option value='2023'>2023</option>
                        <option value='2024'>2024</option>
                    </select> 
                    <br>
                    <span id="cardDateErrorMessage"></span>
                    <br>
                    <label for="cardCVC">CVC</label>
                        <input 
                        required
                        placeholder="xxx"
                        id="cardCVC" 
                        type="number"
                        name="cardCVC"
                        maxlength = "3"
                        oninput="this.value=this.value.slice(0,this.maxLength)">
                        <br>
                        <span id="cardCvcErrorMessage"></span>
                        <br>
                </div>
            </div>
        </div>
    </div>
        <div class="billing-details">
            Billing Address
            <div class="billing-details-container">
                <div id="billingAddressForm" class="billing-address-form">
                    <label for="name">Fullname</label>
                        <input 
                        required
                        id="fullName" 
                        type="text" 
                        name="name">
                    <label for="email">Email</label>
                        <input 
                        required
                        id="email" 
                        type="email" 
                        name="email">
                    <label for="address">Address</label>
                        <input 
                        required
                        id="address" 
                        type="text" 
                        name="address">
                    <label for="addressLineTwo">Address line 2 (City/Town)</label>
                        <input 
                        required
                        id="addressLineTwo" 
                        type="text" 
                        name="addressLineTwo">
                    <label for="postcode">Postcode</label>
                        <input 
                        required
                        max="4" 
                        id="postcode" 
                        type="text" 
                        name="postcode">
                    <label for="phoneNumber">Phone Number</label>
                        <input 
                        required
                        id="phoneNumber" 
                        type="tel" 
                        name="phoneNumber">
                        <label for="country-options">Country</label>
                    <select id="country-options" name="country" required>
                        <option value="" disabled selected>Country of residence</option>
                        
                    </select>
                    <br>
                    <label for="orderNotes">Order info / delivery messages</label>
                        <textarea
                        name="orderNotes"
                        id="orderNotes"
                        ></textarea>
                </div>
            </div>
        </div>
    </section>
    <button class="confirm-purchase-button">Confirm Purchase</button>
</form>
    <footer>
        <div class="footer-container">
            <div class="footer-wrapper">
                <div class="footer-social-contact">
                    FACEBOOK - INSTAGRAM - LINKEDIN
                </div>
                <div class="footer-site-info">
                All rights reserved © 2021 komplett.no
                </div>
                <a href="https://codepen.io/jamie-kielland">Jamie Kielland</a>
            </div>
        </div>
    </footer>
</div>
    <script src="./../Components/checkoutApi.js"></script>
    <script src="./../Components/redoingCart/eventBus.js"></script>
    <script src="./../Components/redoingCart/fetchCart.js"></script>
    <script src="./../Components/redoingCart/bigCart.js"></script>
    <script src="./../Components/redoingCart/updateQuantityApi.js"></script>
    <script src="./../Components/redoingCart/removeItemApi.js"></script>
    <script src="./../Components/redoingCart/freightApi.js"></script>
    <script src="./../Components/redoingCart/cartFreightOptions.js"></script>
    <script src="./../Components/redoingCart/cartSummary.js"></script>
    <script src="./../Components/redoingMainPage/smallCartCounter.js"></script>
    <script src="./../Components/redoingCart/countrySelectApi.js"></script>
    <script src="./../Components/redoingCart/cartState.js"></script>
    <script src="./../Components/redoingMainPage/smallCartState.js"></script>
    <script src="./../Components/state.js"></script>

</body>
<script>

async function onLoadCart()  {
    publishEvent("pageLoad")
}

function dropdownMenu() {

    let dropdownBtn = document.querySelector('.user_icon');
    let menuContent = document.querySelector('.dropdown-content');

    if(menuContent.style.display===""){
        menuContent.style.display="flex";
    } else {
        menuContent.style.display="";
    }
}

async function onSubmitConfirmButton(event)    {
    checkoutApiCall(event);
}
function formatCreditCard() {
    var x = document.getElementById("cardNumber");
    var index = x.value.lastIndexOf('-');
    var test = x.value.substr(index + 1);
    if  (test.length === 4 && x.value.length<19)
        x.value = x.value + '-';
}

</script>
</html>