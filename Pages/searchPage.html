<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- <link rel="stylesheet" href="./../styling/mainPage.css" />
        <link rel="stylesheet" href="./../styling/nestedMenu.css" /> -->
        <title>Document</title>
    </head>
    <body onload="onLoadSearch()">
        <div class="main-page-container">
            <custom-header></custom-header>
            <search-bar></search-bar>
            <custom-footer></custom-footer>
        </div>

        <script
            type="module"
            src="./../Components/webComponents/components.js"
        ></script>
        <script src="./../Components/redoingCart/eventBus.js"></script>
        <script src="./../Components/state.js"></script>
        <script src="./../Components/redoingMainPage/searchPageApiCall.js"></script>
        <script src="./../Components/redoingMainPage/searchFunctionality.js"></script>
        <script src="./../Components/redoingMainPage/searchPageRenderItems.js"></script>
        <script src="./../Components/redoingMainPage/fetchUserApi.js"></script>
        <script src="./../Components/redoingMainPage/userNameVisibility.js"></script>
        <script src="./../Components/redoingMainPage/userLogout.js"></script>
        <script src="./../Components/redoingMainPage/addProductToCartApi.js"></script>
        <script src="./../inheretanceApi/mainApi.js"></script>
        <script src="./../inheretanceApi/productsApi.js"></script>
        <script src="./../inheretanceApi/userApi.js"></script>
        <script src="./../inheretanceApi/cartApi.js"></script>
        <script src="./../inheretanceApi/freightOptionsApi.js"></script>
        <script src="./../inheretanceApi/categoriesApi.js"></script>
    </body>

    <script>
        function searchInputUser(event) {
            let inputContainer = document.getElementById("search_input").value;

            if (event.key === "Enter") {
                publishEvent("userSearchInput", inputContainer);
            }
        }

        function onLoadSearch() {
            publishEvent("pageLoad");
        }

        function logoutUser() {
            publishEvent("userClickLogout");
        }

        async function cartUserLogin() {
            let state = getState();
            if (state.isLoggedIn === true) {
                let cartItems = await checkCart();
                countCartItems(cartItems);
            } else return false;
        }

        function dropdownMenu() {
            let dropdownBtn = document.querySelector(".user_icon");
            let menuContent = document.querySelector(".dropdown-content");

            if (menuContent.style.display === "") {
                menuContent.style.display = "flex";
            } else {
                menuContent.style.display = "";
            }
        }
    </script>
</html>
